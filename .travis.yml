language: node_js

node_js:
  - 0.10
  - 0.11

before_install:
  - npm install -g gulp

before_script:
  - webdriver-manager update --standalone
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  # Immune to logouts, but not VM deprovisions!
  - nohup bash -c "./node_modules/protractor/bin/webdriver-manager start 2>&1 &"
  - sleep 5 # wait for selenium server to actually come up
  - cd test && node app.js


script:
  - gulp ci